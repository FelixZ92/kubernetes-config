bases:
  - ../base

# secrets used in PreSync hooks need to be applied here due to sync stages - otherwise we'll land in an infinite sync loop
resources:
  - secrets/argocd-oidc-secret.json
  - secrets/argocd-oidc-signing-secret.json
  - secrets/dashboard-oidc-secret.json
  - secrets/dashboard-oidc-signing-secret.json
  - secrets/grafana-admin-user.json
  - secrets/keycloak-admin-user.json
  - secrets/keycloak-oidc-secret.json
  - secrets/monitoring-oidc-secret.json
  - secrets/monitoring-oidc-signing-secret.json
  - secrets/postgres-operator-oidc-secret.json
  - secrets/postgres-operator-oidc-signing-secret.json
  - secrets/longhorn-system-oidc-secret.json
  - secrets/longhorn-system-oidc-signing-secret.json
  - secrets/traefik-oidc-secret.json
  - secrets/traefik-oidc-signing-secret.json

patchesStrategicMerge:
  - 01_argocd/application-argocd-repo-path.yaml
  - 03_infrastructure/certificate-authority-repo-path.yaml
  - 03_infrastructure/traefik-env-patch.yaml
  - 05_observability/loki-env-patch.yaml
  - 05_observability/prometheus-operator-env-patch.yaml
  - 05_observability/promtail-env-patch.yaml
  - 06_identity/keycloak-repo-path.yaml
  - 07_external-access/external-access-repo-path.yaml
  - 07_external-access/dashboard-repo-path.yaml
