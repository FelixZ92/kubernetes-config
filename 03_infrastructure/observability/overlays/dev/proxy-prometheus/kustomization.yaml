resources:
  - ../../../../oidc-proxy

namePrefix: prometheus-

namespace: monitoring

# workaround to apply those labels on selectors
commonLabels:
  app.kubernetes.io/instance: external-access-prometheus

configMapGenerator:
  - name: gatekeeper-config
    behavior: replace
    literals:
      - REDIRECTION_URL=https://prometheus.127.0.0.1.xip.io
      - UPSTREAM_URL=http://kube-prometheus-stack-prometheus:9090
      - DISCOVERY_URL=http://keycloak-http.keycloak.svc/auth/realms/k8s
      - SKIP_OPENID_PROVIDER_TLS_VERIFY=true
