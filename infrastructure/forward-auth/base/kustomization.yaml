namespace: traefik
commonLabels:
  app.kubernetes.io/name: traefik-forward-auth

resources:
  - deployment.yaml
  - service.yaml
  - ingress.yaml
  - middleware.yaml
  - signing-secret.yaml

generatorOptions:
  disableNameSuffixHash: true

configMapGenerator:
  - name: traefik-forward-auth-env
    literals:
      - DEFAULT_PROVIDER=oidc
      - PROVIDERS_OIDC_ISSUER_URL=https://gitlab.com
      - COOKIE_DOMAIN=${BASE_DOMAIN}
      - LIFETIME=21600 # 6 Hours
      - LOG_LEVEL=debug
      - LOG_FORMAT=json
      - AUTH_HOST=auth.${BASE_DOMAIN}
      - URL_PATH=/_oauth
      - INSECURE_COOKIE=true
      - WHITELIST=${ALLOWED_USERS}
